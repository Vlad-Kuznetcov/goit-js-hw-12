{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport axios from 'axios';\n\nconst BASE_URL = 'https://pixabay.com/api/';\nconst API_KEY = '45057307-b447de7416eadb33be54d4a0d';\nconst STATUS_BAD_REQUEST = 400;\n\nexport async function getImages(query, page) {\n  const params = {\n    key: API_KEY,\n    q: query,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: 'true',\n    per_page: 15,\n    page: page,\n  };\n\n  try {\n    const response = await axios.get(BASE_URL, { params: params });\n    return response.data;\n  } catch (error) {\n    if (error.response.status === STATUS_BAD_REQUEST) {\n      iziToast.error({\n        message: `Request error: ${error}`,\n        position: 'topRight',\n      });\n    }\n  }\n}\n","const gallery = document.querySelector('.gallery');\n\nfunction imgTemplate({\n  webformatURL,\n  largeImageURL,\n  tags,\n  likes,\n  views,\n  comments,\n  downloads,\n}) {\n  return `<li class=\"gallery-item\"> \n    <figure class=\"sign\">\n      <a href=\"${largeImageURL}\">\n        <img class=\"list-img\" src=\"${webformatURL}\" alt=\"${tags}\" title=\"\" width=\"360\" height=\"200\"/>\n      </a>\n      <figcaption class=\"title-img\">\n        <ul class=\"figcaption\">\n          <li class=\"figcaption-item\">Likes<p class=\"counter\">${likes}</p></li>\n          <li class=\"figcaption-item\">Views<p class=\"counter\">${views}</p></li>\n          <li class=\"figcaption-item\">Comments<p class=\"counter\">${comments}</p></li>\n          <li class=\"figcaption-item\">Downloads<p class=\"counter\">${downloads}</p></li>\n        </ul>\n      </figcaption>\n    </figure>\n  </li>`;\n}\n\nfunction imgsTemplate(arr) {\n  return arr.map(imgTemplate).join('');\n}\n\nexport function renderImg(hits) {\n  const markup = imgsTemplate(hits);\n  gallery.innerHTML += markup;\n}\n","import { getImages } from './js/pixabay-api';\nimport { renderImg } from './js/render-functions';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst refs = {\n  btnSearch: document.querySelector('.btn-search'),\n  form: document.querySelector('.form'),\n  input: document.querySelector('input'),\n  ul: document.querySelector('ul.gallery'),\n  loadBtn: document.querySelector('.load-btn'),\n};\n\nlet page = 1;\nlet query = '';\nlet gallery = new SimpleLightbox('.gallery a');\n\nrefs.form.addEventListener('submit', async e => {\n  try {\n    refs.loadBtn.classList.remove('hiddenBtn');\n\n    e.preventDefault();\n    query = refs.input.value.trim();\n    if (query === '') {\n      iziToast.error({\n        title: 'Error',\n        message: 'Please enter a search query',\n      });\n      return;\n    }\n\n    refs.ul.innerHTML = '';\n    page = 1;\n    startLoader();\n    const result = await getImages(query, page);\n    stopLoader();\n\n    if (result.hits.length === 0) {\n      iziToast.error({\n        title: 'No results',\n        message: 'No images found. Please try a different query.',\n      });\n      refs.loadBtn.classList.add('hidden');\n    } else {\n      renderImg(result.hits);\n      gallery.refresh();\n      if (result.hits.length < 15) {\n        refs.loadBtn.classList.add('hidden');\n      } else {\n        refs.loadBtn.classList.remove('hidden');\n      }\n    }\n  } catch (error) {\n    stopLoader();\n    iziToast.error({\n      title: 'Error',\n      message: 'Something went wrong.',\n    });\n  }\n});\n\nrefs.loadBtn.addEventListener('click', async () => {\n  page += 1;\n  startLoader();\n  const result = await getImages(query, page);\n  stopLoader();\n\n  if (result.hits.length === 0) {\n    refs.loadBtn.classList.add('hiddenBtn');\n    iziToast.info({\n      title: 'No more results',\n      message: \"We're sorry, but you've reached the end of search results.\",\n    });\n  } else {\n    renderImg(result.hits);\n    gallery.refresh();\n    if (result.hits.length < 15) {\n      refs.loadBtn.classList.add('hiddenBtn');\n      iziToast.info({\n        title: 'No more results',\n        message: \"We're sorry, but you've reached the end of search results.\",\n      });\n    }\n  }\n  scrollToEnd();\n});\n\nfunction scrollToEnd() {\n  window.scrollTo({\n    top: document.body.scrollHeight,\n    behavior: 'smooth',\n  });\n}\n\nfunction startLoader() {\n  refs.loadBtn.insertAdjacentHTML(\n    'afterend',\n    '<div id=\"loader\" class=\"loader\"></div>'\n  );\n}\nfunction stopLoader() {\n  document.querySelector('.loader').remove();\n}\n"],"names":["BASE_URL","API_KEY","STATUS_BAD_REQUEST","getImages","query","page","params","axios","error","iziToast","gallery","imgTemplate","webformatURL","largeImageURL","tags","likes","views","comments","downloads","imgsTemplate","arr","renderImg","hits","markup","refs","SimpleLightbox","e","startLoader","result","stopLoader","scrollToEnd"],"mappings":"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"}